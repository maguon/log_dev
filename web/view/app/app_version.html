<!-- 主菜单：app系统 -->
<div class="app_version">

    <!-- 追加画面【新增操作】 模态框 -->
    <div class="row" style="margin: 0">
        <div id="addAppSystem" class="modal modal-fixed-footer" style="width: 75%;height: 600px">
            <div class="modal-content center fz20" style="font-weight: 500;padding: 0">

                <!-- 追加画面【新增操作】 Header -->
                <div class="row col s12 vc-center" style="color: white;letter-spacing:1px;font-weight: bold;height: 50px;background-color:rgb(63,185,193)"><p>新增操作</p></div>

                <!-- 追加画面【新增操作】 Body -->
                <div class="row col s12">
                    <div style="width: 90%;margin: 0 auto">
                        <div class="col s12">

                            <!-- 系统 -->
                            <div class=" col s6 input-field">
                                <select material-select ng-model="appInfo.app">
                                    <option value="" selected>请选择</option>
                                    <option ng-repeat="app in appSystems" ng-value="{{app.id}}">{{app.name}}</option>
                                </select>
                                <label><span style="color: red">* </span>系统</label>
                            </div>

                            <!-- 模块 -->
                            <div class="col s6 input-field">
                                <select material-select ng-model="appInfo.type">
                                    <option value="" selected>请选择</option>
                                    <option  ng-repeat="op in modules" ng-value="{{op.id}}">{{op.name}}</option>
                                </select>
                                <label><span style="color: red">* </span>模块</label>
                            </div>
                        </div>
                        <div class="col s12">

                            <!-- 版本号 -->
                            <div class=" col s6 p0">
                                <div class="col s12 input-field">
                                    <input type="text" id="addAppVersion" maxlength="20" ng-model="appInfo.version">
                                    <label for="addAppVersion"><span style="color: red">* </span>版本号</label>
                                </div>
                            </div>

                            <!-- 是否强制更新 -->
                            <div class=" col s6 input-field">
                                <select material-select watch ng-model="appInfo.forceUpdate">
                                    <option value="" selected>请选择</option>
                                    <option ng-repeat="op in forceUpdates" ng-value="{{op.id}}">{{op.name}}</option>
                                </select>
                                <label><span style="color: red">* </span>是否强制更新</label>
                            </div>
                        </div>

                        <div class="col s12">

                            <!-- 版本序号 -->
                            <div class=" col s6 p0">
                                <div class="col s12 input-field">
                                    <input type="number" id="addAppVersionNum" watch valid-num ng-model="appInfo.versionNum">
                                    <label for="addAppVersionNum"><span style="color: red">* </span>版本序号</label>
                                </div>
                            </div>

                            <!-- 最低支持版本序号 -->
                            <div class=" col s6 input-field">
                                <input type="number" id="addAppMinVersionNum" watch valid-num ng-model="appInfo.minVersionNum">
                                <label for="addAppMinVersionNum"><span style="color: red">* </span>最低支持版本序号</label>
                            </div>
                        </div>

                        <!-- 下载地址 -->
                        <div class="col s12 " style="margin-bottom:  40px;">
                            <div class="col s12 input-field">
                                <input type="text" id="url" maxlength="200" ng-model="appInfo.url">
                                <label for="url"><span style="color: red">* </span>下载地址</label>
                            </div>
                        </div>

                        <!-- 描述 -->
                        <div class="col s12">
                            <div class="col s12 input-field">
                                <textarea id="remark" class="materialize-textarea" ng-model="appInfo.remark" maxlength="400"></textarea>
                                <label for="remark">描述</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 追加画面【新增操作】 Footer -->
            <div class="modal-footer valign-wrapper">
                <div class="col s12">
                    <!-- 取消 按钮 -->
                    <div class="col s2 offset-s4">
                        <a style="width: 100%" class="modal-action modal-close waves-light waves-effect grey lighten-1 btn">取消</a>
                    </div>
                    <!-- 确定 按钮 -->
                    <div class="col s2">
                        <a ng-click="addAppInfo()" style="width: 100%" class="waves-light waves-effect cyan lighten-1 btn">确定</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 编辑画面【操作记录】 模态框 -->
    <div class="row" style="margin: 0">
        <div id="showAppSystem" class="modal modal-fixed-footer" style="width: 75%;height: 600px">
            <div class="modal-content center fz20" style="font-weight: 500;padding: 0">

                <!-- 编辑画面【操作记录】 Header -->
                <div class="row col s12 vc-center" style="color: white;letter-spacing:1px;font-weight: bold;height: 50px;background-color:rgb(63,185,193)"><p>操作记录</p></div>

                <!-- 编辑画面【操作记录】 Body -->
                <div class="row col s12" style="margin-top: 35px">
                    <div style="width: 90%;margin: 0 auto">
                        <div class="col s12">

                            <!-- 系统 -->
                            <div class=" col s6 input-field">
                                <select  material-select id="app" ng-model="showAppInfo.app" style="border-bottom: 1px solid #000">
                                    <option value="" selected>请选择</option>
                                    <option ng-repeat="app in appSystems" ng-value="{{app.id}}">{{app.name}}</option>
                                </select>
                                <label for="app"><span style="color: red">* </span>系统</label>
                            </div>

                            <!-- 模块 -->
                            <div class=" col s6 input-field">
                                <select material-select id="type" ng-model="showAppInfo.type" style="border-bottom: 1px solid #000">
                                    <option value="" selected>请选择</option>
                                    <option  ng-repeat="op in modules" ng-value="{{op.id}}">{{op.name}}</option>
                                </select>
                                <label for="type"><span style="color: red">* </span>模块</label>
                            </div>
                        </div>
                        <div class="col s12">

                            <!-- 版本号 -->
                            <div class=" col s6 p0">
                                <div class="col s12 input-field">
                                    <input type="text" id="updateAppVersion" maxlength="20" ng-model="showAppInfo.version">
                                    <label for="updateAppVersion"><span style="color: red">* </span>版本号</label>
                                </div>
                            </div>

                            <!-- 是否强制更新 -->
                            <div class=" col s6 p0">
                                <div class="input-field col s12">
                                    <select material-select ng-model="showAppInfo.force_update">
                                        <option value="" selected>请选择</option>
                                        <option ng-repeat="op in forceUpdates" ng-value="{{op.id}}">{{op.name}}</option>
                                    </select>
                                    <label><span style="color: red">* </span>是否强制更新</label>
                                </div>
                            </div>
                        </div>

                        <div class="col s12">

                            <!-- 版本序号 -->
                            <div class=" col s6 p0">
                                <div class="col s12 input-field">
                                    <input type="number" id="updateAppVersionNum" watch valid-num ng-model="showAppInfo.version_number">
                                    <label for="updateAppVersionNum"><span style="color: red">* </span>版本序号</label>
                                </div>
                            </div>

                            <!-- 最低支持版本序号 -->
                            <div class=" col s6 input-field">
                                <input type="number" id="updateAppMinVersionNum" watch valid-num ng-model="showAppInfo.floor_version_number">
                                <label for="updateAppMinVersionNum"><span style="color: red">* </span>最低支持版本序号</label>
                            </div>
                        </div>

                        <!-- 下载地址 -->
                        <div class="col s12 " style="margin-bottom:  40px;">
                            <div class="col s12 input-field">
                                <input type="text" name="url" id="updateUploadUrl" maxlength="200" ng-model="showAppInfo.url">
                                <label for="updateUploadUrl"><span style="color: red">* </span>下载地址</label>
                            </div>
                        </div>

                        <!-- 描述 -->
                        <div class="col s12">
                            <div class="col s12 input-field">
                                <textarea id="pdateforceUpdate_description" class="materialize-textarea" ng-model="showAppInfo.remark" maxlength="400"></textarea>
                                <label for="pdateforceUpdate_description">描述</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 编辑画面【操作记录】 Footer -->
            <div class="modal-footer valign-wrapper">
                <div class="col s12">
                    <!-- 取消 按钮 -->
                    <div class="col s2 offset-s4">
                        <a style="width: 100%" class="modal-action modal-close waves-light waves-effect grey lighten-1 btn">取消</a>
                    </div>
                    <!-- 确定 按钮 -->
                    <div class="col s2">
                        <a ng-click="updateAppInfo(showAppInfo.id)" style="width: 100%" class="waves-light waves-effect cyan lighten-1 btn">确定</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 主画面：检索部 + 详细信息列表部 -->
    <div class="modal-content grey-text text-darken-2">
        <div class="row no-marBottom" ul-tabs style="overflow: hidden">
            <div id="header_car" class="row tab_box">

                <!-- 主画面：检索部 -->
                <div class="storage_storeTitle">
                    <div class="row grey-text text-darken-1 valign-wrapper">
                        <div class="col s10" style="color: #000; !important">

                            <!-- 主画面：检索部 系统 -->
                            <div class=" col s4 p0">
                                <div class="input-field col s12">
                                    <select material-select watch name="type" class="type" ng-model="conditionApp">
                                        <option value="">系统</option>
                                        <option  ng-repeat="app in appSystems" ng-value="{{app.id}}">{{app.name}}</option>
                                    </select>
                                </div>
                            </div>

                            <!-- 主画面：检索部 模块 -->
                            <div class=" col s4 p0">
                                <div class="input-field col s12">
                                    <select material-select watch ng-model="conditionType">
                                        <option value="">模块</option>
                                        <option ng-repeat="op in modules" ng-value="{{op.id}}">{{op.name}}</option>
                                    </select>
                                </div>
                            </div>

                            <!-- 主画面：检索部 是否强制更新 -->
                            <div class=" col s4 p0">
                                <div class="input-field col s12">
                                    <select material-select watch ng-model="conditionForceUpdate">
                                        <option value="">是否强制更新</option>
                                        <option ng-repeat="op in forceUpdates" ng-value="{{op.id}}">{{op.name}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- 主画面：检索部 检索按钮/追加按钮 -->
                        <div class="col s2">

                            <!-- 检索 按钮 -->
                            <div class="col s6 center">
                                <a class=" btn-floating btn-large waves-light waves-effect red lighten-2  btn vc-center" style="margin-right: 10px" ng-click="searchAppSystem()">
                                    <i class="mdi mdi-magnify"></i>
                                </a>
                            </div>

                            <!-- 追加 按钮 -->
                            <div class="col s6 center">
                                <a class="btn-floating btn-large waves-light waves-effect cyan lighten-1 btn vc-center" style="margin-right: 10px" ng-click="openAddAppSystem()">
                                    <i class="mdi mdi-plus"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 主画面：详细信息列表部 -->
                <div class="col s12">
                    <div class="col s12">
                        <div class="divider" style="background: #00bcd4;height: 2px"></div>
                        <table class="bordered striped text_mid" style="table-layout:fixed;">
                            <thead class="blue-grey lighten-5">
                                <tr class="grey-text text-darken-2">
                                    <th data-field="">操作时间</th>
                                    <th data-field="">系统</th>
                                    <th data-field="">模块</th>
                                    <th data-field="">最新版本号</th>
                                    <th data-field="">强制更新</th>
                                    <th data-field="">描述</th>
                                    <th data-field="">操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="appSystemItem in appSystemList" class="grey-text text-darken-1">
                                    <!-- 操作时间 -->
                                    <td>{{appSystemItem.updated_on | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                                    <!-- 系统 -->
                                    <td>{{appSystems[appSystemItem.app - 1].name}}</td>
                                    <!-- 模块 -->
                                    <td>{{modules[appSystemItem.type - 1].name}}</td>
                                    <!-- 最新版本号 -->
                                    <td ng-bind="appSystemItem.version"></td>
                                    <!-- 强制更新 -->
                                    <td>{{forceUpdates[appSystemItem.force_update].name}}</td>
                                    <!-- 描述 -->
                                    <td ng-bind="appSystemItem.remark" class="context-ellipsis" style="width:200px"></td>
                                    <!-- 操作 -->
                                    <td class="operation vc-center">
                                        <a ng-click="openModifyAppSystem(appSystemItem.id)" class="cyan-text fz12" style="cursor: pointer;display: inline-block;width: 37px;height: 37px;">
                                            <i style="font-size: 1.3rem;line-height: 38px" class="mdi mdi-file-document"></i>
                                        </a>
                                    </td>
                                </tr>
                                <tr class="grey-text text-darken-1" ng-if="appSystemList.length == 0">
                                    <td colspan="7"><span style="letter-spacing: 2px">暂无数据</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- 上一页 / 下一页 -->
                <div style="position: relative">
                    <div class="paging_box col s12">
                        <div class="right">
                            <a class="waves-light waves-effect cyan lighten-1 btn" id="pre"  ng-click="getPrePage()" >上一页</a>
                            <a class="waves-light waves-effect cyan lighten-1 btn" id="next" ng-click="getNextPage()">下一页</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>