<!--财务管理  --  金融车辆信息-->

<div class="row">

    <!-- 上部分：检索条件输入区域 -->
    <div class="row col s12">

        <!--左侧 查询条件-->
        <div class="col s10">

            <!-- 查询条件：信用证编码 -->
            <div class="input-field col" style="width: 20%">
                <input type="text" id="condCreditId" ng-model="condCreditId">
                <label for="condCreditId">信用证编码</label>
            </div>

            <!-- 查询条件：vin码 -->
            <div class="input-field col" style="width: 40%">
                <input type="text" id="vinText" ng-model="condVin">
                <label for="vinText">VIN码</label>
            </div>

            <!-- 查询条件：关联还款编号 -->
            <div class="input-field col" style="width: 20%">
                <input type="text" id="condLoan" ng-model="condLoan">
                <label for="condLoan">关联还款编号</label>
            </div>

            <!-- 状态 -->
            <div class="input-field col" style="width: 20%">
                <select material-select watch ng-model="condStatus">
                    <option value="">状态</option>
                    <option ng-repeat="el in statusList" ng-value="el.id">{{el.name}}</option>
                </select>
            </div>

            <!--委托方-->
            <div class="input-field col" style="width: 20%">
                <select  id="entrustSelect"   style="width: 100%">
                    <option value="" ></option>
                    <option ng-repeat="el in entrustList" ng-value="el.id">{{el.short_name}}</option>
                </select>
            </div>


            <!-- 预计回款日期(始) -->
            <div class="input-field col" style="width: 20%">
                <input type="text" id="expectedDateStart" ng-model="expectedDateStart" class="datepicker" date>
                <i class="mdi dataIcon mdi-table-large"></i>
                <label for="expectedDateStart">预计回款日期(始)</label>
            </div>

            <!--预计回款日期(终)-->
            <div class="input-field col" style="width: 20%">
                <input id="expectedDateEnd" type="text" ng-model="expectedDateEnd" class="datepicker" date>
                <i class="mdi dataIcon mdi-table-large"></i>
                <label for="expectedDateEnd">预计回款日期(终)</label>
            </div>

            <!-- 实际回款日期(始) -->
            <div class="input-field col" style="width: 20%">
                <input type="text" id="actualDateStart" ng-model="actualDateStart" class="datepicker" date>
                <i class="mdi dataIcon mdi-table-large"></i>
                <label for="actualDateStart">实际回款日期(始)</label>
            </div>

            <!--实际回款日期(终)-->
            <div class="input-field col" style="width: 20%">
                <input id="actualDateEnd" type="text" ng-model="actualDateEnd" class="datepicker" date>
                <i class="mdi dataIcon mdi-table-large"></i>
                <label for="actualDateEnd">实际回款日期(终)</label>
            </div>
        </div>

        <!--右侧 查询按钮-->
        <div class="col s2" style="margin-top:45px;">
            <!-- 查询按钮-->
            <div class="col s6 right-align">
                <a class="btn-floating btn-large waves-light waves-effect red lighten-2 btn" ng-click="queryCreditCardInfo()">
                    <i class="mdi mdi-magnify"></i>
                </a>
            </div>
            <!-- 新增按钮 -->
            <div class="col s6 center">
                <a class=" btn-floating btn-large waves-light waves-effect cyan lighten-1 btn"
                   ng-click="openNewCreditCardDiv()">
                    <i class="mdi mdi-plus"></i>
                </a>
            </div>
        </div>

    </div>

    <!-- 下部分：查询结果区域-->

    <!--列表信息-->
    <div class="col s12">
        <!--分割线-->
        <div class="divider" style="background: #4e84cb;height: 2px;"></div>
        <table class=" bordered striped centered">
            <thead class="blue-grey lighten-5">
            <tr class="grey-text text-darken-2">
                <th>信用证编号</th>
                <th>委托方</th>
                <th>信用证金额(美元)</th>
                <th>实际到款金额(美元)</th>
                <th>接证日期</th>
                <th>交单日期</th>
                <th>预计回款日期</th>
                <th>实际回款日期</th>
                <th>关联还款编号</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="el in creditCardList" class="grey-text text-darken-1">
                <!-- 信用证编号 -->
                <td ng-bind="el.credit_number"></td>
                <!-- 委托方 -->
                <td ng-bind="el.short_name"></td>
                <!-- 信用证金额-->
                <td ng-bind="el.credit_money"></td>
                <!-- 实际到款金额 -->
                <td ng-bind="el.actual_money"></td>
                <!-- 接证日期 -->
                <td ng-bind="el.receive_card_date |date:'yyyy-MM-dd'"></td>
                <!-- 交单日期 -->
                <td ng-bind="el.documents_date |date:'yyyy-MM-dd'"></td>
                <!-- 预计回款日期 -->
                <td ng-bind="el.plan_return_date|date:'yyyy-MM-dd'"></td>
                <!-- 实际回款日期 -->
                <td ng-bind="el.actual_return_date|date:'yyyy-MM-dd'"></td>
                <!-- 关联还款编号 -->
                <td ng-if="el.repayment_id==0"></td>
                <td ng-if="el.repayment_id!==0">{{el.repayment_id}}</td>
                <!-- 状态 -->
                <td  ng-bind="statusList[el.credit_status-1].name"></td>
                <!--操作-->
                <td class="operation">
                    <!-- 详情 -->
                    <a href="#" ui-sref="credit_card_detail({id:el.id,from:'credit_card'})">
                        <i class="mdi mdi-file-outline look_icon cyan-text lighten-1"></i>
                    </a>
                </td>
            </tr>
            <tr class="grey-text text-darken-1" ng-if="creditCardList.length == 0">
                <td colspan="11" style="letter-spacing: 2px;text-align: center;">暂无数据</td>
            </tr>
            </tbody>
        </table>
    </div>

    <!--分页-->
    <div class="paging_box col s12">
        <div class="right">
            <a class="waves-light waves-effect cyan lighten-1 btn" id="pre" ng-click="preBtn()">
                上一页
            </a>
            <a class="waves-light waves-effect cyan lighten-1 btn " id="next" ng-click="nextBtn()">
                下一页
            </a>
        </div>
    </div>

</div>



<!-- 画面【新增信用证】 模态框 -->
<div class="row" style="margin: 0">
    <div id="newCreditCardDiv" class="modal" style="width: 45%;">
        <div class="modal-content center" style="font-weight: 500;padding: 0">

            <!-- 显示画面【新增信用证】 Header -->
            <div class="col s12 vc-center cyan fz20"
                 style="color: white;letter-spacing:1px;font-weight: bold;height: 50px;">
                <p>新增信用证</p>
            </div>


            <div class="row no-marBottom" ul-tabs>
                <div class="col s12 p0" style="width: 88%;margin-left:6%;margin-top: 20px">
                    <ul class="tabWrap grey lighten-4">
                        <li class="tab col s6 baseMsg vc-center active"  ng-click="baseMsg()">基本信息</li>
                        <li class="tab col s6 linkFinanceCar vc-center" ng-click="linkFinanceCar()">关联金融车</li>
                    </ul>
                </div>

                <!--基本信息-->
                <div id="baseMsg" class="col s12 tab_box">
                    <!-- 显示画面【新增信用证】 Body -->
                    <div class="row col" style="width:94%; margin-left: 3%;">
                        <!-- 金融车辆信息 -->
                        <div class="col s12" style="margin-top: 20px;">
                            <div class="row col s12">
                                <!-- 新增條件：信用证编码 -->
                                <div class="input-field col s4">
                                    <input type="text" id="addCreditId" ng-model="addCreditId">
                                    <label for="addCreditId"><span class="red-text">*</span>信用证编码</label>
                                </div>

                                <!-- 委托方性质 -->
                                <div class="input-field col s4">
                                    <select material-select watch ng-model="addEntrustType" ng-change="getEntrustInfo(addEntrustType)">
                                        <option value="" disabled>委托方性质</option>
                                        <option ng-repeat="el in entrustTypeList" ng-value="el.entrust_type">{{el.name}}</option>
                                    </select>
                                </div>

                                <!--委托方-->
                                <div class="input-field col s4">
                                    <select  id="addEntrustSelect" style="width: 100%">
                                        <option value="" ></option>
                                        <option ng-repeat="el in addEntrustList" ng-value="el.id">{{el.short_name}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row col s12">
                                <!-- 新增條件：信用证金额(美元) -->
                                <div class="input-field col" style="width: 33.3%">
                                    <input type="number" id="addCreditMoney" ng-model="addCreditMoney">
                                    <label for="addCreditMoney"><span class="red-text">*</span>信用证金额(美元)</label>
                                </div>

                                <!-- 新增條件：实际到款金额(美元) -->
                                <div class="input-field col" style="width: 33.3%">
                                    <input type="number" id="addActualMoney" ng-model="addActualMoney">
                                    <label for="addActualMoney"><span class="red-text">*</span>实际到款金额(美元)</label>
                                </div>

                                <!-- 预计回款日期 -->
                                <div class="input-field col s4">
                                    <input type="text" id="addPlanReturnDate" ng-model="addPlanReturnDate" class="datepicker" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="addPlanReturnDate">预计回款日期</label>
                                </div>
                            </div>
                            <div class="row col s12">
                            <!--接证日期-->
                                <div class="input-field col s4">
                                    <input id="addReceiveCardDate" type="text" ng-model="addReceiveCardDate" class="datepicker" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="addReceiveCardDate">接证日期</label>
                                </div>

                                <!-- 交单日期 -->
                                <div class="input-field col s4">
                                    <input type="text" id="addDocumentsDate" ng-model="addDocumentsDate" class="datepicker" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="addDocumentsDate">交单日期</label>
                                </div>

                                <!--实际回款日期-->
                                <div class="input-field col s4">
                                    <input id="addActualReturnDate" type="text" ng-model="addActualReturnDate" class="datepicker" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="addActualReturnDate">实际回款日期</label>
                                </div>
                            </div>
                            <div class="row col s12">
                                <!--文件发出日期-->
                                <div class="input-field col s4">
                                    <input id="addDocumentsSendDate" type="text" ng-model="addDocumentsSendDate" class="datepicker" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="addDocumentsSendDate">文件发出日期</label>
                                </div>

                                <!--开户行文件接收日期-->
                                <div class="input-field col s4">
                                    <input id="addDocumentsReceiveDate" type="text" ng-model="addDocumentsReceiveDate" class="datepicker" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="addDocumentsReceiveDate">开户行文件接收日期</label>
                                </div>

                                <!--实际汇款日期-->
                                <div class="input-field col s4">
                                    <input id="addActualRemitDate" type="text" ng-model="addActualRemitDate" class="datepicker" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="addActualRemitDate">实际汇款日期</label>
                                </div>
                            </div>
                            <!-- 发票号码 -->
                            <div class="row col s12">
                                <div class="input-field col s12">
                                    <input type="text" id="addInvoiceNumber" ng-model="addInvoiceNumber">
                                    <label for="addInvoiceNumber">发票号码</label>
                                </div>
                            </div>

                            <!-- 备注 -->
                            <div class="row col s12">
                                <div class="input-field col s12">
                                    <input type="text" id="addRemarkText" ng-model="addRemarkText">
                                    <label for="addRemarkText">备注</label>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- 分割线 -->
                    <div class="divider col s12" style="margin-top: 50px;"></div>

                    <!-- 取消/确认 按钮 -->
                    <div class="row col right-align" style="width: 96%;margin-top: 20px;">
                        <a class="btn-floating waves-effect waves-light grey btn modal-close">
                            <i class="mdi mdi-close"></i>
                        </a>
                        <a class="btn-floating waves-effect waves-light cyan lighten-1 btn" style="margin-left: 20px;"
                           ng-click="addCreditCardInfo()">
                            <i class="mdi mdi-check"></i>
                        </a>
                    </div>

                </div>

                <!--关联金融车-->
                <div id="linkFinanceCar" class="col s12 tab_box">
                    <div class="row col" style="width:94%; margin-left: 3%;">

                       <!--上部分：查询功能-->
                        <div class="row col" style="width: 100%;position: relative">

                            <div class="input-field col s12">
                                <input type="text" id="autocomplete-input" name="vin" placeholder="                  模糊查询至少需要6位vin码" ng-change="shortSearch()" ng-model="creditVin" style="margin: 0 0 20px 0" autocomplete="off" class="autocomplete" required minlength="6">
                                <label for="autocomplete-input">VIN码</label>
                            </div>
                            <button class=" btn btn-floating btn-small waves-effect cyan lighten-1" ng-click="addLinkCar()"  style="position: absolute;top: 15px;right: 10px;">
                                <i class="mdi white-text mdi-plus fz30"></i>
                            </button>
                        </div>

                         <!--下部分：查询结果-->
                         <div class="col s12" style="height:500px">
                             <div class="row blue-grey lighten-5" style="width:98%;border:1px solid #bdbdbd">
                                 <!-- header -->
                                 <div class="col s12 lighten-1 cyan-text vc-center left-align" style="height:50px;">
                                     <div class="col s3 ">
                                         VIN码：{{paymentInfo.id}}
                                     </div>
                                     <div class="col s1">
                                        <i class="mdi mdi-slackware"></i>
                                     </div>
                                     <div class="col s1 ">
                                         <i class="mdi mdi-briefcase"></i>
                                     </div>
                                     <div class="col s3">
                                      **
                                     </div>
                                     <div class="col s3 right-align red-text">
                                        **
                                     </div>
                                 </div>

                                 <!-- body -->
                                 <div class="col s12 lighten-1 white grey-text vc-center fz13 left-align" style="height:40px;">
                                     <div class="input-field col s4">
                                         始发港口：{{paymentInfo.start_port_name}}
                                     </div>
                                     <div class="input-field col s4">
                                         目的港口：{{paymentInfo.end_port_name}}
                                     </div>
                                     <div class="input-field col s4">
                                         开船日期：{{paymentInfo.start_ship_date | date:'yyyy-MM-dd' }}
                                     </div>
                                 </div>
                                 <div class="col s12 white">
                                     <div class="s12 center" style="width:98%; margin-left: 10px;margin-right: 10px;margin-top: 10px;border: 1px dotted #ccc"></div>
                                 </div>
                                 <!-- body -->
                                 <div class="col s12 lighten-1 white grey-text vc-center fz13 left-align" style="height:40px;">
                                     <div class="input-field col s4">
                                         船公司：{{paymentInfo.ship_company_name}}
                                     </div>
                                     <div class="input-field col s4">
                                         船名：{{paymentInfo.ship_name}}
                                     </div>
                                     <div class="input-field col s4">
                                         到港日期：{{paymentInfo.end_ship_date | date:'yyyy-MM-dd'}}
                                     </div>
                                 </div>
                                 <div class="col s12 white">
                                     <div class="s12 center" style="width:98%; margin-left: 10px;margin-right: 10px;margin-top: 10px;border: 1px dotted #ccc"></div>
                                 </div>
                                 <!-- body -->
                                 <div class="col s12 lighten-1 white grey-text vc-center fz13 left-align" style="height:40px;">
                                     <div class="input-field col s4">
                                         货柜：{{paymentInfo.container}}
                                     </div>
                                     <div class="input-field col s4">
                                         booking：{{paymentInfo.booking}}
                                     </div>
                                     <div class="input-field col s4">
                                         封签：{{paymentInfo.tab}}
                                     </div>
                                 </div>

                                 <div class="col s12 white">
                                     <div class="divider s12 center" style="width:98%; margin-left: 10px;margin-right: 10px;margin-top: 10px;"></div>
                                 </div>


                                 <div class="col s12 lighten-1 white grey-text vc-center fz13 left-align" style="height:40px;">
                                     <div class="col s12">
                                         备注：{{paymentInfo.start_ship_user_name}}
                                     </div>
                                 </div>
                             </div>
                         </div>

                        <!-- 分割线 -->
                        <div class="divider col s12" style="margin-top: 50px;"></div>

                        <!-- 取消/确认 按钮 -->
                        <div class="row col right-align" style="width: 96%;margin-top: 20px;">
                            <a class="btn-floating waves-effect waves-light grey btn modal-close">
                                <i class="mdi mdi-close"></i>
                            </a>
                            <a class="btn-floating waves-effect waves-light cyan lighten-1 btn" style="margin-left: 20px;"
                               ng-click="addCarLinkInfo()">
                                <i class="mdi mdi-check"></i>
                            </a>
                        </div>

                        </div>
                    </div>


                </div>
            </div>


        </div>
    </div>
</div>