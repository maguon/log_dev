<!--新增模块-->
<div id="newStorageCar" class="modal">

    <!--标题：新增入库车辆-->
    <div class="cyan lighten-1 white-text center-align modal_title" >新增入库车辆</div>
    <div class="modal-content">
        <div class="row no-marBottom" ul-tabs>
            <div class="col s12 p0">

                <!--tab按钮-->
                <ul class="tabWrap grey lighten-4 ">
                    <li class="tab col  disabled vc-center tab1 active" style="width: 20%">VIN</li>
                    <li class="tab col  disabled vc-center tab2 " style="width: 20%">信息</li>
                    <li class="tab col  disabled vc-center tab3 " style="width: 20%">仓储</li>
                    <li class="tab col  disabled vc-center tab4 " style="width: 20%">照片</li>
                    <li class="tab col  disabled vc-center tab5 " style="width: 20%">钥匙</li>
                </ul>
            </div>

            <!--详情-->

            <!--第一步：根据vin码查询车辆的基本信息是否存在-->
            <div id="tab1" class="col s12 tab_box">
                <div class="row " style="width: 900px;height:500px;margin: 0 auto">
                    <div class="col s1 vc-center cyan-text mp-50 text-lighten-1" style="font-size: 25px;min-width: 90px"><span>vin码:</span></div>
                    <div class="col s9 vc-center mp-30 valign-wrapper">
                        <div class="input-field col s12">
                            <input type="text" id="autocomplete-input" name="vin" placeholder="模糊查询至少需要6位vin码" ng-change="shortSearch()" ng-model="demandVin" style="margin: 0 0 20px 0" autocomplete="off" class="autocomplete" required minlength="6">
                        </div>
                    </div>
                    <div  class="col s1 mp-30 valign-wrapper">
                        <button class=" btn btn-floating btn-large waves-effect cyan lighten-1" ng-click="demandCar()" >
                            <i style="font-size: 40px" class="mdi white-text mdi-magnify"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!--第二步：基本信息的填写或者修改-->
            <div id="tab2" class="col s12 tab_box">

                <!--新增入库车辆的基本信息-->
                <div ng-show="showStorageData === 1" style="margin-top:20px">

                    <!--第一行-->
                    <div class="row"  >
                        <div class="input-field col s4">
                            <input  id="vin" name="vin" autocomplete="off" ng-model="demandVin" type="text"  disabled required >
                            <label for="vin"><span style="color: red;margin-right: 5px">*</span>VIN码</label>
                        </div>
                        <div class="input-field col s4">
                            <select material-select watch id="makeNameId" name="makeNameId" ng-change="getMakeId(makeNameId)" ng-model="makeNameId" >
                                <option value="" disabled selected>请选择</option>
                                <option ng-repeat="el in makecarName" ng-value="el.id" >{{el.make_name}}</option>
                            </select>
                            <label for="makeNameId"><span style="color: red;margin-right: 5px">*</span>制造商</label>
                        </div>
                        <div class="input-field col s4">
                            <select material-select watch id="modelNameId" name="modelName"   ng-model="modelNameId" >
                                <option value="" disabled selected>请选择</option>
                                <option  ng-repeat="el in carModelName" ng-value="el.id">{{el.model_name}}</option>
                            </select>
                            <label for="modelNameId"><span style="color: red;margin-right: 5px">*</span>型号</label>
                        </div>
                    </div>
                    <!--第二行-->
                    <div class="row" >
                        <div class="input-field col s4">
                            <input type="text" id="create_time" maxlength="4" valid-num ng-model="create_time">
                            <label for="create_time">年份</label>
                        </div>
                        <div class="input-field col s4">
                            <select material-select watch id="car_color" name="car_color"  ng-model="car_color" >
                                <option value="" disabled selected>请选择</option>
                                <option ng-repeat="el in color" ng-value="el.colorId" >{{el.colorName}}</option>
                            </select>
                            <label for="car_color">颜色</label>
                        </div>
                        <div class="input-field col s4">
                            <input  id="engineNum" name="engineNum" autocomplete="off" ng-model="engineNum" type="text"    >
                            <label for="engineNum">发动机号</label>
                        </div>
                    </div>
                    <!--第三行-->
                    <div class="row" >
                        <!--新增委托方-->
                        <div class="input-field col s4">
                            <select id="addEntrustSelect" style="width: 100%">
                                <option value=""></option>
                                <option ng-repeat="el in entrustList"  ng-value="el.id" >{{el.short_name}}</option>
                            </select>
                        </div>
                        <!--新增车辆估值-->
                        <div class="input-field col s4">
                            <input type="text" id="carValuation" valid-money maxlength="10" ng-model="carValuation">
                            <label for="carValuation"><span style="color: red;margin-right: 5px">*</span>车辆估值(美元)</label>
                        </div>
                        <!--是否MSO车辆-->
                        <div class="input-field col s2">
                            <select material-select watch id="MSO" name="MSO"  ng-model="MSO" >
                                <option value="" disabled selected>请选择</option>
                                <option value="2">是</option>
                                <option value="1">否</option>
                            </select>
                            <label for="MSO"><span style="color: red;margin-right: 5px">*</span>是否MSO车辆</label>
                        </div>
                        <!--是否金融车辆-->
                        <div class="input-field col s2">
                            <select material-select watch id="condPurchaseType" name="condPurchaseType" ng-model="condPurchaseType">
                                <option value="" disabled selected>请选择</option>
                                <option ng-repeat="el in purchaseTypes" ng-value="el.id">{{el.name}}</option>
                            </select>
                            <label for="condPurchaseType"><span style="color: red;margin-right: 5px">*</span>是否金融车</label>
                        </div>
                    </div>
                    <!--第四行-->
                    <div class="row">
                        <p class="col 12 min-width-2 left-align  grey-text darken-2">
                            备注:</p>
                        <div class="col s12 valign-wrapper" style="position: relative">
                            <p class=" col s12 p0">
                                <input id="remark"  name="remark" class="col s12 " ng-model="remark" >
                            </p>
                        </div>
                    </div>

                    <!--分隔线-->
                    <div class="divider" style="background: #407BC7;height: 2px;"></div>

                    <!--添加 取消  按钮-->
                    <div class="modal-footer right-align">

                        <!--添加-->
                        <button class="btn btn-floating waves-light waves-effect  cyan lighten-1" ng-click="addCarDataItem()" name="action" >
                            <i class="mdi mdi-trending-neutral"></i>
                        </button>

                        <!--取消-->
                        <a  class=" modal-action btn-floating modal-close waves-effect  grey lighten-1waves-light   btn" style="margin-right: 10px" >
                            <i class="mdi mdi-close"></i>
                        </a>

                    </div>
                </div>

                <!--修改已有的车辆基本信息-->
                <div ng-show="showStorageData === 2"  style="margin-top:20px">

                    <!--第一行-->
                    <div class="row">
                        <div class="input-field col s4">
                            <input  id="vin1" name="vin" autocomplete="off" ng-model="baseList.vin" type="text"  disabled required >
                            <label for="vin1"><span style="color: red;margin-right: 5px">*</span>VIN码</label>
                        </div>
                        <div class="input-field col s4">
                            <select material-select watch id="makecarName1"   ng-model="baseList.make_id" ng-change="getMakeId(baseList.make_id)">
                                <option value="" disabled selected>请选择</option>
                                <option ng-repeat="el in makecarName" ng-value="el.id" >{{el.make_name}}</option>
                            </select>
                            <label for="makecarName1">制造商</label>
                        </div>
                        <div class="input-field col s4">
                            <select material-select watch name="model_name1" id="model_name1" ng-model="baseList.model_id">
                                <option value="" disabled selected>请选择</option>
                                <option  ng-repeat="el in carModelName" ng-value="el.id">{{el.model_name}}</option>
                            </select>
                            <label for="model_name1">型号</label>
                        </div>
                    </div>

                    <!--第二行-->
                    <div class="row" >
                        <div class="input-field col s4">
                            <input type="text" id="create_time1" maxlength="4" valid-num ng-model="baseListDate">
                            <label for="create_time1">年份</label>
                        </div>
                        <div class="input-field col s4">
                            <select material-select watch id="car_color1" name="car_color1" ng-model="baseList.colour">
                                <option value="" disabled selected>请选择</option>
                                <option ng-repeat="el in color" ng-value="el.colorId" >{{el.colorName}}</option>
                            </select>
                            <label for="car_color1">颜色</label>
                        </div>
                        <div class="input-field col s4">
                            <input  id="engineNum1" name="engineNum" autocomplete="off" ng-model="baseList.engine_num" type="text"   required  >
                            <label for="engineNum1">发动机号</label>
                        </div>
                    </div>

                    <!--第三行-->
                    <div class="row" >
                        <!--新增委托方-->
                        <div class="input-field col s4">
                            <select material-select watch id="entrustId1" name="entrustId1"  ng-model="baseList.entrust_id" >
                                <option value="" disabled selected>请选择</option>
                                <option ng-repeat="el in entrustList"  ng-value="el.id" >{{el.short_name}}</option>
                            </select>
                            <label for="entrustId1"><span style="color: red;margin-right: 5px">*</span>委托方</label>
                        </div>
                        <!--新增车辆估值-->
                        <div class="input-field col s4">
                            <input type="text" id="carValuation1" valid-money maxlength="10" ng-model="baseList.valuation">
                            <label for="carValuation1"><span style="color: red;margin-right: 5px">*</span>车辆估值(美元)</label>
                        </div>
                        <!--是否MSO车辆-->
                        <div class="input-field col s2">
                            <select material-select watch id="MSO1" name="MSO1" ng-model="baseList.mso_status" >
                                <option value="" disabled selected>请选择</option>
                                <option ng-value="2">是</option>
                                <option ng-value="1">否</option>
                            </select>
                            <label for="MSO1"><span style="color: red;margin-right: 5px">*</span>是否MSO车辆</label>
                        </div>
                        <!--是否金融车辆-->
                        <div class="input-field col s2">
                            <select material-select watch ng-model="baseList.purchase_type" id="purchase_type">
                                <option value="" disabled selected>请选择</option>
                                <option ng-repeat="el in purchaseTypes" ng-value="el.id">{{el.name}}</option>
                            </select>
                            <label for="purchase_type"><span style="color: red;margin-right: 5px">*</span>是否金融车</label>
                        </div>

                    </div>

                    <!--第四行-->
                    <div class="row">
                        <p class="col 12 min-width-2 left-align  grey-text darken-2">
                            备注:</p>
                        <div class="col s12 valign-wrapper" style="position: relative">
                            <p class=" col s12 p0">
                                <input id="remark1"  name="remark1" class="col s12 " ng-model="baseList.remark" >
                            </p>
                        </div>
                    </div>

                    <!--分割线-->
                    <div class="divider" style="background: #407BC7;height: 2px;"></div>

                    <!--更新 取消 按钮-->
                    <div class="modal-footer right-align">

                        <!--更新-->
                        <button class="btn btn-floating waves-light waves-effect  cyan lighten-1" ng-click="putCarDataItem()" name="action" >
                            <i class="mdi mdi-trending-neutral"></i>
                        </button>

                        <!--取消-->
                        <a  class=" modal-action btn-floating modal-close waves-effect  grey lighten-1waves-light   btn" style="margin-right: 10px" >
                            <i class="mdi mdi-close"></i>
                        </a>
                    </div>
                </div>
            </div>

            <!--第三步：车辆入库-->
            <div id="tab3" class="col s12 tab_box">
                <div style="height: 500px">

                    <!--第一行-->
                    <div class="row  p0 storage_position"  style="padding-bottom: 5px" >
                        <div class="col s4" >
                            <div class="row input-field cyan white-text">
                                <div class="col s6 " style="height: 100%;line-height: 317%"><p><span style="margin-right: 5px">*</span>计划出库时间</p></div>
                                <div class="col s6">
                                    <input  id="plan_out_time" name="plan_out_time" autocomplete="off" ng-model="plan_out_time" type="text"   required class="datepicker " date><i class="mdi dataIcon grey-text text-lighten-1 mdi-table-large"></i>
                                    <label for="plan_out_time"></label>
                                </div>
                            </div>
                        </div>
                        <div class="col s4" >
                            <div class="row input-field cyan white-text">
                                <select  material-select watch id="storageName" name="storageName"  ng-change="getStorageId(storage_name.id)" ng-options="o.storage_name for o in storageName|filter:{storage_status:'1'}" ng-model="storage_name" required>
                                    <option value=""  selected style="padding-left: 5px;">存放仓库</option>
                                </select>
                            </div>
                        </div>
                        <div class="col s4">
                            <div class="row input-field cyan white-text">
                                <select material-select watch id="area" ng-change="getStorageAreaParking(area.id)" ng-model="area" ng-options="area.area_name for area in storageAreaParking" >
                                    <option value=""  selected style="padding-left: 5px;">存放区域</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!--第二行-->
                    <div class="row  p0 storage_position"  style="padding-bottom: 5px" >
                        <div class="col s4">
                            <div class="input-field  valign-wrapper cyan white-text" >
                                <select material-select watch class="col s12" ng-change="getStorageRow(addRow)"  ng-model="addRow"  required>
                                    <option value=""  disabled>存放排数</option>
                                    <option ng-repeat="el in storageParking"  ng-value="el.row" >{{el.row}}排</option>
                                </select>
                            </div>
                        </div>
                        <div class="col s4">
                            <div class="input-field  valign-wrapper cyan white-text" >
                                <select material-select watch class="col s12" ng-change="getStorageCol(addRow,addCol)" ng-model="addCol" required>
                                    <option value=""  disabled>存放列位</option>
                                    <option ng-repeat="el in storageRow"  ng-value="el.col">{{el.col}}列</option>
                                </select>
                            </div>
                        </div>
                        <div class="col s4">
                            <div class="input-field  valign-wrapper cyan white-text" >
                                <select material-select watch class="col s12" ng-model="parking_id" required>
                                    <option value=''  disabled>存放格位</option>
                                    <option ng-repeat="el in storageCol" ng-if="el.car_id==0"  ng-value="el.id" ng-bind="characters[el.lot-1].name">{{el.lot}}</option>
                                    <option ng-repeat="el in storageCol" ng-if="el.car_id!==0" ng-bind="characters[el.lot-1].name" disabled  >{{el.lot}}</option>

                                </select>
                            </div>
                        </div>

                    </div>
                </div>

                <!--分割线-->
                <div class="divider" style="background: #407BC7;height: 2px;"></div>

                <!--添加 取消 按钮-->
                <div class="modal-footer right-align">

                    <!--添加-->
                    <button class="btn btn-floating waves-light waves-effect  cyan lighten-1" ng-click="addStorageCarOnce(storage_name.id,storage_name.storage_name,parking_id,plan_out_time)" name="action">
                        <i class="mdi mdi-trending-neutral"></i>
                    </button>

                    <!--取消-->
                    <a  class=" modal-action btn-floating modal-close waves-effect  grey lighten-1waves-light   btn" style="margin-right: 10px" >
                        <i class="mdi mdi-close"></i>
                    </a>
                </div>
            </div>

            <!--第四步：上传相片或者查看相片-->
            <div id="tab4" class="col s12 tab_box">
                <div class="row no-marBottom">
                    <div class="col s12 valign-wrapper " style="position: relative">
                        <p class="col s1-0 min-width-2 left-align p0">
                            <span style="color: red">*</span>
                            车辆照片:</p>
                        <div class="storage_car_picture_wrap col s9-0 p0" >
                            <form name="uploadImageForm" class="uploadImageForm">
                                <div class="storage_car_picture col s3 vc-center  p0 cyan lighten-1 white-text">
                                    <input name="image" type="file" onchange="angular.element(this).scope().uploadBrandImage(this)" max_size="4M">
                                    <i class="mdi mdi-instagram"></i>
                                </div>
                                <ul id="look_img">
                                    <li ng-repeat="el in storageImageBox"    class="storage_car_picture col s3 vc-center  p0 grey white-text">
                                        <img ng-src="{{el.src}}" class="responsive-img">
                                    </li>
                                </ul>
                            </form>
                        </div>
                    </div>
                    <div class="divider" style="background: #407BC7;height: 2px;"></div>
                    <div class="modal-footer right-align">
                        <button class="btn btn-floating waves-light waves-effect  cyan lighten-1" ng-click="nextStep()" name="action" >
                            <i class="mdi mdi-trending-neutral"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!--第五步：钥匙的入库存放-->
            <div id="tab5" class="col s12 tab_box">
                <div class="cyan row  p0 storage_position" style="height: 70px;width: 100%;padding-bottom: 5px;margin-top: 35px">
                    <div class="col s4" >
                        <div class="row input-field  white-text">
                            <select  material-select watch ng-model="addCarKeyCabinet" ng-change="changeCarKeyCabinet()" required>
                                <option value="" disabled selected style="padding-left: 5px;">请选择钥匙柜</option>
                                <option ng-repeat="el in keyCabinetNameList"  ng-value="el.id" >{{el.key_cabinet_name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col s4">
                        <div class="row input-field  white-text" >
                            <select material-select watch ng-model="addCarKeyCabinetArea"  ng-change="changeCarKeyCabinetArea()" required>
                                <option value="" disabled  selected>请选择扇区</option>
                                <option ng-repeat="el in carKeyCabinetAreaList"  ng-value="el.id" >{{el.area_name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col s4">
                        <div class="valign-wrapper cyan white-text right fz20" style="margin-top: 25px;margin-right:25px">
                            {{addRow}}排{{addCol}}列
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div ng-if="show==false" disabled></div>
                    <div ng-if="show==true" class="garageWrap">
                        <div class="garageBox">
                            <div class=" col s12 garage_list p0" >
                                <div class="garage_row vc-center left"></div>
                                <div class="garage_row vc-center left" ng-repeat="el in carKeyCabinetParkingCol">
                                    {{el.col}}
                                </div>
                            </div>
                            <div class="col s12  garage_list p0"  ng-repeat="el in carKeyCabinetParkingArray" >
                                <div class="garage_row vc-center left">{{$index+1}}</div>
                                <div class="garage_row vc-center left" ng-repeat="els in el.col track by $index" ng-class="{'present_place':el.row==now_row&&els.col==now_col}">
                                    <i ng-show="els.carId!=0" class=" mdi  mdi-key-variant cyan-text lighten-1"></i>
                                    <i ng-show="els.carId==0" class=" mdi mdi-key-variant grey-text lighten-2"  ng-click="addCarKeyCabinetParking(els.id,el.row,els.col)"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--添加 取消 按钮-->
                <div class="modal-footer right-align">

                    <!--添加-->
                    <button class="btn btn-floating waves-light waves-effect  cyan lighten-1" ng-click="addcarKeyCabinetItem()" name="action" >
                        <i class="mdi mdi-check"></i>
                    </button>

                    <!--取消-->
                    <a  class=" modal-action btn-floating modal-close waves-effect  grey lighten-1waves-light   btn" style="margin-right: 10px" >
                        <i class="mdi mdi-close"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>


<!--钥匙模态框-->
<div id="keyCabinet" class="modal ">
    <div class="modal-content">

        <!--標題-->
        <h4 class="center-align">钥匙存放位置</h4>

        <!--分割綫-->
        <div class="divider"></div>

        <!--钥匙在库中 正常显示-->
        <div ng-if="flag==true">
            <div class="row col s12 garageWrapTitle vc-center fz20" style="height: 50px;background: #e0e0e0;" >
                <div class="col s7">
                    <h5 class="col s12 left-align" style="color: #4e84cb">
                        {{keyCabinetName}}号钥匙柜
                    </h5>
                </div>
                <div class="col s5 right-align">
                    <div class="col s12">
                        <span class="fz33" style="color: #4e84cb">{{areaName}}</span><span>扇区</span>
                        <span class="fz33" style="color: #4e84cb">{{keyCabinetRow}}</span><span>排</span>
                        <span class="fz33" style="color: #4e84cb">{{keyCabinetCol}}</span><span>列</span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="garageWrap">
                    <div class="garageBox">
                        <div class=" col s12 garage_list p0" >
                            <div class="garage_row vc-center left"></div>
                            <div class="garage_row vc-center left" ng-repeat="el in carKeyCabinetParkingCol">
                                {{el.col}}
                            </div>
                        </div>
                        <div class="col s12  garage_list p0"  ng-repeat="el in carKeyCabinetParkingArray" >
                            <div class="garage_row vc-center left">{{$index+1}}</div>
                            <div class="garage_row vc-center left" ng-repeat="els in el.col track by $index">
                                <i ng-show="els.carId==keyCabinetId" class=" mdi  mdi-key-variant cyan-text lighten-1"></i>
                                <i ng-show="els.carId!==keyCabinetId" class=" mdi mdi-key-variant grey-text lighten-2" ></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--钥匙不在库中 显示暂无-->
        <div ng-if="flag==false">
            <div class="row fz20 vc-center" style="height: 300px;">
                <i class="mdi mdi-alert-circle-outline" style="color: red;font-size: 30px"></i>
                <span style="color: grey">该钥匙不在仓库中！</span>
            </div>
        </div>

        <!--分割线-->
        <div class="divider"></div>

        <!--关闭按钮-->
        <button class="btn btn-floating waves-light waves-effect  cyan lighten-1" ng-click="closeCarKeyCabinetModal()" name="action" style="margin-left: 80%;margin-top: 25px">
            <i class="mdi mdi-check"></i>
        </button>
    </div>
</div>


<!--车辆移位模态框-->
<div id="change_storageCar" class="modal" style="width: 90%;height: 70%;">
    <div class="modal-content">
        <h4 class="center-align">车辆移位</h4>

        <!-- 头部 -->
        <div class="row cyan lighten-1 white-text" style="margin: 10px 0 0 0 ">
            <div class="valign-wrapper">

                <!-- 仓库 名称 -->
                <h5 class="col s2">
                    <div ng-bind="storageInfo.storage_name" class="white-text text-darken-1 context-ellipsis"></div>
                </h5>

                <!-- 仓库柜 扇区列表 -->
                <div class="col s3" style="width: 50%;">
                    <p class="col s8 left-align">
                        <select material-select watch ng-model="selectedZone"
                                ng-change="getStorageAreaInfo(selectedZone);" class="center">
                            <option ng-repeat="op in zoneList"  ng-value="{{op.id}}" ng-selected="op.id == selectedZone">
                                {{op.area_name}}
                            </option>
                        </select>
                    </p>
                </div>

                <!-- 仓库柜 总位置 / 剩余位置 -->
                <div class="col s7 white-text fz16">
                    <p class="col" style="width:12%;">
                        行: <span ng-bind="row"></span>
                    </p>
                    <p class="col" style="width:13%;">
                        列: <span ng-bind="col"></span>
                    </p>
                    <p class="col" style="width:25%;">
                        单元存车位: <span ng-bind="lot"></span>
                    </p>
                    <p class="col" style="width:25%;">
                        总位置: {{(row == null || row == undefined) ? 0 : row * col * lot}}
                    </p>
                    <p class="col" style="width:25%;">
                        剩余位置: <span ng-bind="leftPosition"></span>
                    </p>
                </div>
            </div>
        </div>

        <!-- 主体 -->
        <div class="" style="width: 95%;margin: 0 auto;padding-top: 20px;">

            <!-- 详细 -->
            <div ng-show="hasPosition == true" class="storageWrap" style="border:0">
                <div ng-repeat="el in storageParkingArray">

                    <!-- 每行之间的余白 -->
                    <div ng-show="el.lot == 1" style="padding-bottom: 30px;"></div>

                    <!-- 头 -->
                    <div ng-show="el.lot == 1" class="col s12 storage_list">
                        <div class="storage_row vc-center" style="border: 1px solid #cccccc; border-right:0px"></div>
                        <div class="storage_row vc-center" style="border: 1px solid #cccccc; border-left: 0px"></div>
                        <div class="storage_row vc-center" style="border: 1px solid #cccccc; border-left: 0px" ng-repeat="el in storageParkingCol">
                            {{el.col}}
                        </div>
                    </div>

                    <!-- 列表 -->
                    <div class="col s12 storage_list">
                        <div class="storage_row vc-center left white-text fz20" style="background-color: #aaaaaa;border: 0px solid #cccccc;">{{(el.lot == 1 ? el.row : '')}}</div>
                        <div class="storage_row vc-center left" style="background-color: #dddddd;">
                            {{characters[el.lot-1].name}}
                        </div>
                        <div class="storage_row vc-center left" ng-repeat="els in el.col track by $index" ng-class="{'present_place':els.carId==moveCarId}">
                            <i ng-show="els.carId!=0" class=" mdi mdi-car cyan-text lighten-1" ></i>
                            <i ng-show="els.carId==0" class=" mdi mdi-car grey-text lighten-2" ng-click="getCarInfo(els.id,el.row,els.col,el.lot)"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-show="hasPosition == false" class="col s12  storage_list  vc-center">
                <span style="letter-spacing: 2px">暂无数据</span>
            </div>
        </div>
    </div>
</div>


<!--出库后入库-->
<div id="loginStorageCar" class="modal modal-fixed-footer ">
    <form name="login_garageForm" novalidate>
        <div class="modal-content">
            <h4 class="center-align">车辆入库</h4>

            <!--计划出库时间 仓库 扇区 行列格-->
            <div class="row cyan white-text">
                <div class="input-field col s4">
                    <select  material-select watch  name="storageName"  ng-change="getStorageId(storage_name.id)" ng-options="o.storage_name for o in storageName|filter:{storage_status:'1'}" ng-model="storage_name" required>
                        <option value=""  selected style="padding-left: 5px;"><span style="color: red;margin-right: 5px">*</span>存放仓库</option>
                    </select>
                </div>
                <div class="input-field col s4">
                    <select material-select watch  ng-change="getStorageAreaParking(area.id)" ng-model="area" ng-options="area.area_name for area in storageAreaParking" >
                        <option value=""  selected style="padding-left: 5px;">存放区域</option>
                    </select>
                </div>
                <div class="input-field col s4">
                    <select material-select watch  ng-change="getStorageRow(outRow)" ng-model="outRow"  required>
                        <option value=""  disabled>存放排数</option>
                        <option ng-repeat="el in storageParking"  ng-value="el.row" >{{el.row}}排</option>
                    </select>
                </div>
                <div class="input-field col s4">
                    <select material-select watch  ng-change="getStorageCol(outRow,outCol)" ng-model="outCol"    required>
                        <option value=""  disabled>存放列位</option>
                        <option ng-repeat="el in storageRow"  ng-value="el.col">{{el.col}}列</option>
                    </select>
                </div>
                <div class="input-field col s4">
                    <select material-select watch  ng-model="parking_id" required>
                        <option value=''  disabled>存放格位</option>
                        <option ng-repeat="el in storageCol" ng-if="el.car_id==0"  ng-value="el.id" ng-bind="characters[el.lot-1].name">{{el.lot}}</option>
                        <option ng-repeat="el in storageCol" ng-if="el.car_id!=0" ng-bind="characters[el.lot-1].name" disabled  >{{el.lot}}</option>

                    </select>
                </div>
                <div class="input-field col s4">
                    <div class="col input-field s12 no-mp">
                        <input type="text" name="login_planOutTime" ng-model="login_planOutTime"  class="datepicker" autocomplete="off" required   date><i class="mdi dataIcon mdi-table-large"></i>
                        <label  class="white-text text-lighten-1 bold">计划出库时间:</label>
                    </div>
                </div>
            </div>

            <!--分割线-->
            <div class="divider" style="background: #407BC7;height: 2px;"></div>
        </div>


        <!--取消 重入库按钮-->
        <div class="modal-footer vc-center">
            <a  class=" modal-action modal-close waves-effect  grey lighten-1waves-light   btn" style="margin-right: 10px" >
                取消
            </a>
            <button class="btn waves-light waves-effect  cyan lighten-1" ng-click="loginStorageCarOnce(login_garageForm.$valid,storage_name.id,storage_name.storage_name,parking_id,login_planOutTime)"  name="action" >
                确定
            </button>
        </div>
    </form>
</div>


<!--主菜单：仓储车辆-->
<div class="Storage_car">

    <!--查詢條件-->
    <div class="row  grey-text text-darken-1">

        <!--查询条件 左侧的条件-->
        <div class="col s10">

                <!--车辆状态-->
                <div class="input-field col" style="width: 20%">
                    <select material-select watch ng-model="getRelStatus">
                        <option value=""  >请选择</option>
                        <option ng-repeat="el in relStatus" ng-value="el.s_num">{{el.status_text}}</option>
                    </select>
                    <label>车辆状态</label>
                </div>

                <!--所在仓库-->
                <div class="input-field col" style="width: 20%">
                    <select material-select watch ng-model="storageIdItem">
                        <option value=""  selected>所在仓库</option>
                        <option ng-if="el.storage_status==1" ng-repeat="el in storageName" ng-value="el.id">{{el.storage_name}}</option>
                    </select>
                </div>

                <!--vin码-->
                <div class="input-field col" style="width: 20%">
                    <input name="search_vin" id="search_vin" type="text" ng-model="vinItem" minlength="6">
                    <label for="search_vin">vin码(至少6位)</label>
                </div>

                <!-- 是否金融车 -->
                <div class="input-field col" style="width: 20%">
                    <select material-select watch ng-model="condPurchaseType">
                        <option value="">是否金融车</option>
                        <option ng-repeat="el in purchaseTypes" ng-value="el.id">{{el.name}}</option>
                    </select>
                </div>
                <!-- 是否抵押车 -->
                <div class="input-field col" style="width: 20%">
                    <select material-select watch ng-model="condMortgageStatus">
                        <option value="">是否抵押车</option>
                        <option ng-repeat="el in mortgageStatus" ng-value="el.id">{{el.short}}</option>
                    </select>
                </div>

                <!--品牌-->
                <div class="input-field col" style="width: 20%">
                    <select material-select watch ng-model="makeIdItem" ng-change="getMakeId(makeIdItem)">
                        <option value="" disabled selected>车辆品牌</option>
                        <option ng-repeat="el in makecarName" ng-value="el.id">{{el.make_name}}</option>
                    </select>
                </div>

                <!--型号-->
                <div class="input-field col" style="width: 20%">
                    <select material-select watch ng-model="modelIdItem" >
                        <option value="" disabled selected>车辆型号</option>
                        <option ng-repeat="el in carModelName" ng-value="el.id">{{el.model_name}}</option>
                    </select>
                </div>

                <!--委托方-->
                <div class="input-field col" style="width: 20%">
                    <select id="entrustSelect" style="width: 100%">
                        <option value="" ></option>
                        <option ng-repeat="el in entrustList" ng-value="el.id">{{el.short_name}}</option>
                    </select>
                </div>

                <!--入库时间（始）-->
                <div class="input-field col" style="width: 20%">
                    <input id="get_enterTime_start" type="text" ng-model="search_enterTime_start"  class="datepicker" autocomplete="off" required   date><i class="mdi dataIcon mdi-table-large"></i>
                    <label for="get_enterTime_start">入库时间（始）</label>
                </div>

                <!--入库时间（终）-->
                <div class="input-field col" style="width: 20%">
                    <input id="get_enterTime_end" type="text" ng-model="search_enterTime_end"  class="datepicker" autocomplete="off"  required   date><i class="mdi dataIcon mdi-table-large"></i>
                    <label for="get_enterTime_end">入库时间（终）</label>
                </div>

                <!--是否MSO-->
                <div class="input-field col" style="width: 20%">
                    <select material-select watch id="MSOItem" name="MSOItem"  ng-model="MSOItem" >
                        <option value="" disabled selected>是否MSO</option>
                        <option value="2">是</option>
                        <option value="1">否</option>
                    </select>
                </div>

                <!--计划出库时间（始）-->
                <div class="input-field col" style="width: 20%">
                    <input id="search_planTime_start" type="text" ng-model="search_planTime_start" class="datepicker" autocomplete="off"  required   date><i class="mdi dataIcon mdi-table-large"></i>
                    <label for="search_planTime_start">计划出库时间（始）</label>
                </div>

                <!--计划出库时间（终）-->
                <div class="input-field col" style="width: 20%">
                    <input id="search_planTime_end" type="text" ng-model="search_planTime_end"  class="datepicker" autocomplete="off"  required   date><i class="mdi dataIcon mdi-table-large"></i>
                    <label for="search_planTime_end">计划出库时间（终）</label>
                </div>

                <!--实际出库时间（始）-->
                <div class="input-field col" style="width: 20%">
                    <input id="search_outTime_start" type="text" ng-model="search_outTime_start"  class="datepicker" autocomplete="off"  required   date><i class="mdi dataIcon mdi-table-large"></i>
                    <label for="search_outTime_start">实际出库时间（始）</label>
                </div>

                <!--实际出库时间（终）-->
                <div class="input-field col" style="width: 20%">
                    <input id="search_outTime_end" type="text" ng-model="search_outTime_end" class="datepicker" autocomplete="off" required   date><i class="mdi dataIcon mdi-table-large"></i>
                    <label for="search_outTime_end">实际出库时间（终）</label>
                </div>

        </div>
        <!--点击按钮-->
        <div class="col s2" style="margin-top: 85px;">

            <!--查询按钮-->
            <div  class="col s4 center">
                <a class="btn-floating btn-large waves-light waves-effect red lighten-2  btn "   ng-click="getStorageCarList()">
                    <i class="mdi mdi-magnify"></i>
                </a>
            </div>

            <!--下载云-->
            <div class="col s4 center">
                <a class="btn-floating btn-large waves-light waves-effect btn vc-center" style="background-color: #fea353;" ng-click="export()">
                    <i class="mdi mdi-cloud-download"></i>
                </a>
            </div>

            <!--新增按钮-->
            <div  class="col s4 center">
                <a class=" btn-floating btn-large waves-light waves-effect cyan lighten-1 btn "  ng-click="addStorageCar()">
                    <i class="mdi mdi-plus"></i>
                </a>
            </div>

        </div>
    </div>

    <!--列表-->
    <div class="col s12" >

        <!--分割线-->
        <div class="divider" style="background: #407BC7;height: 2px;"></div>

        <!--列表详情-->
        <table class="bordered striped centered">

            <!--第一行-->
            <thead class="blue-grey lighten-5">
                <tr class="grey-text text-darken-2">
                    <th data-field="">VIN码</th>
                    <th data-field="">品牌</th>
                    <th data-field="">型号</th>
                    <th data-field="">委托方</th>
                    <th data-field="">存放车库</th>
                    <th data-field="">存放区域</th>
                    <th data-field="">存放位置</th>
                    <th data-field="">入库时间</th>
                    <th data-field="">计划出库时间</th>
                    <th data-field="">实际出库时间</th>
                    <th data-field="">车辆属性</th>
                    <th>操作</th>
                </tr>
            </thead>

            <!--其余行（循环）-->
            <tbody>
                <tr ng-repeat="el in storageCar" class="grey-text text-darken-1">
                    <!-- VIN码 -->
                    <td ng-bind="el.vin"></td>
                    <!-- 品牌 -->
                    <td ng-bind="el.make_name"></td>
                    <!-- 型号 -->
                    <td ng-bind="el.model_name"></td>
                    <!-- 委托方 -->
                    <td>{{el.entrust_id==null ? '无' : el.short_name}}</td>
                    <!-- 存放车库 -->
                    <td>{{el.storage_id==null ? '无' : el.storage_name}}</td>
                    <!-- 存放区域 -->
                    <td>{{el.area_name==null ? '无' : el.area_name}}</td>
                    <!-- 存放位置 -->
                    <td ng-if="el.lot==null&&el.col==null&&el.row==null">无</td>
                    <td ng-if="el.lot!==null||el.col!==null||el.row!==null" >{{el.row}}排{{el.col}}列{{characters[el.lot-1].name}}</td>
                    <!-- 入库时间 -->
                    <td ng-bind="el.enter_time|date:'yyyy-MM-dd'"></td>
                    <!-- 计划出库时间 -->
                    <td ng-bind="el.plan_out_time|date:'yyyy-MM-dd '"></td>
                    <!-- 实际出库时间 -->
                    <td ng-bind="el.real_out_time|date:'yyyy-MM-dd '"></td>
                    <!--车辆属性-->
                    <td>
                        <!-- 金融车(0：不是金融车， 1 金融车) -->
                        <span ng-show="el.purchase_type==1" class="mdi mdi-cash-usd fz18" style="color: #f0ad4e"></span>
                        <!-- 抵押车(1：未抵押，2：抵押) -->
                        <span ng-show="el.mortgage_status==2" class="mdi mdi-lock fz18 cyan-text"></span>
                    </td>
                    <!-- 操作 -->
                    <td class="operation">

                        <!--钥匙存放位置-->
                        <span>
                            <i ng-if="el.rel_status==1" class="mdi mdi-key-variant cyan-text lighten-1" ng-click="getKeyCabinet(el.id,el.row,el.col)"></i>
                         </span>

                        <!--点击进入详情页面-->
                        <a ng-href="#!/storage_car_detail/{{el.id}}/{{el.vin}}?from=storage_car"  class=""><i class="mdi mdi-file-outline look_icon cyan-text lighten-1  " ></i></a>

                        <!--是否出库-->
                        <span>
                            <i ng-if="el.rel_status==1" class="mdi mdi-logout cyan-text lighten-1" ng-click="outStorageCar(el.r_id,2,el.p_id,el.storage_id,el.id)" ></i>
                            <i ng-if="el.rel_status==2" class="mdi mdi-login cyan-text lighten-1" ng-click="loginStorageCar(el.vin,el.id)"></i>
                        </span>

                        <!--车辆移位-->
                        <span>
                            <i ng-if="el.rel_status==1" class="mdi mdi-rotate-left cyan-text lighten-1" ng-click="changeStorageCar(el.storage_id,el.area_id,el.id)"></i>
                        </span>
                    </td>
                </tr>

                <!--当搜索结果为空时-->
                <tr class="grey-text text-darken-1" ng-if="storageCar.length == 0" style="border-bottom: 1px solid #ccc;">
                    <td colspan="12"><span style="letter-spacing: 2px">暂无数据</span></td>
                </tr>
            </tbody>
        </table>
    </div>

    <!--分页-->
    <div class="col s12 paging_box">
        <div class="right">
            <a class="waves-light waves-effect cyan lighten-1 btn"  id="pre"   ng-click="preBtn()">
                上一页
            </a>
            <a class="waves-light waves-effect cyan lighten-1 btn" id="next"  ng-click="nextBtn()">
                下一页
            </a>
        </div>
    </div>
</div>





